{
  "uid": "mtogo-overview",
  "title": "MTOGO - Overview",
  "timezone": "browser",
  "schemaVersion": 38,
  "version": 1,
  "refresh": "5s",
  "tags": ["mtogo", "exam"],
  "templating": {
    "list": [
      {
        "name": "service",
        "type": "custom",
        "label": "Service",
        "hide": 0,
        "query": "gateway,ordering,legacy-menu",
        "current": { "text": "ordering", "value": "ordering" }
      }
    ]
  },
  "panels": [
    {
      "type": "timeseries",
      "title": "Requests/sec (selected service)",
      "gridPos": { "x": 0, "y": 0, "w": 24, "h": 8 },
      "targets": [
        {
          "refId": "A",
          "expr": "sum(rate(http_requests_received_total{job=\"$service\"}[1m]))"
        }
      ]
    },
    {
      "type": "timeseries",
      "title": "5xx errors/sec (selected service)",
      "gridPos": { "x": 0, "y": 8, "w": 12, "h": 8 },
      "targets": [
        {
          "refId": "A",
          "expr": "sum(rate(http_requests_received_total{job=\"$service\",code=~\"5..\"}[5m]))"
        }
      ]
    },
    {
      "type": "timeseries",
      "title": "Latency p95 (selected service)",
      "gridPos": { "x": 12, "y": 8, "w": 12, "h": 8 },
      "targets": [
        {
          "refId": "A",
          "expr": "histogram_quantile(0.95, sum(rate(http_request_duration_seconds_bucket{job=\"$service\"}[5m])) by (le))"
        }
      ]
    },
    {
      "type": "timeseries",
      "title": "Ordering: 503 dependency failures/sec",
      "gridPos": { "x": 0, "y": 16, "w": 24, "h": 8 },
      "targets": [
        {
          "refId": "A",
          "expr": "sum(rate(http_requests_received_total{job=\"ordering\",code=\"503\"}[2m]))"
        }
      ]
    }
  ]
}
